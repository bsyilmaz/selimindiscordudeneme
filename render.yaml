# Blueprint Spec version
# (isteğe bağlı, ancak iyi bir pratik olabilir)
# version: 1

services:
  - type: web
    name: backend
    env: node
    plan: free
    region: frankfurt
    buildCommand: "cd server && npm install"
    startCommand: "cd server && npm start"
    healthCheckPath: "/health"
    envVars:
      - key: NODE_ENV
        value: production

# Statik siteler için ayrı bir bölüm
staticSites:
  - name: frontend
    plan: free
    region: frankfurt
    buildCommand: "cd client && npm install && npm run build"
    staticPublishPath: "./client/build"
    routes:
      - type: rewrite
        source: "/*"
        destination: "/index.html"
    # Frontend için build zamanında kullanılacak ortam değişkenleri buraya eklenebilir.
    # Örneğin, REACT_APP_BACKEND_URL. Ortam değişkenleri Render UI üzerinden
    # frontend servisine eklenmelidir.
    # envVars:
    #   - key: REACT_APP_BACKEND_URL
    #     fromService:
    #       type: web
    #       name: backend
    #       property: url # Bu şekilde backend URL'sini otomatik alabilir (Render UI'da kontrol et)

  - type: static_site
    name: frontend
    plan: free
    region: frankfurt
    buildCommand: "cd client && npm install && npm run build"
    staticPublishPath: "./client/build"
    routes:
      - type: rewrite
        source: "/*"
        destination: "/index.html"
    envVars:
      - key: NODE_ENV
        value: production
      # Frontend için build zamanında kullanılacak ortam değişkenleri buraya eklenebilir.
      # Örneğin, API endpoint'i REACT_APP_API_URL gibi.
      # Bu değişkenleri client/package.json build script'inde veya
      # client kodunda process.env.REACT_APP_API_URL olarak kullanabilirsiniz. 